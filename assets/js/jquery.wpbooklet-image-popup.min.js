/*! jquery-wpbooklet-image-popup - v1.0.0 - 2015-06-12
* Copyright (c) 2015 BinaryStash; Licensed MIT */
!function(a){a.fn.wpbookletImagePopup=function(b){return a.fn.wpbookletImagePopup.useOptions=a.extend({},a.fn.wpbookletImagePopup.defaultOptions,b),this.each(function(b,c){var d=a.fn.wpbookletImagePopup.createPopup(a(c));a(c).click(function(b){b.preventDefault(),a.fn.wpbookletImagePopup.openPopup(d,a(c))})})},a.fn.wpbookletImagePopup.createPopup=function(b){var c=a("<div class='wpbooklet-image-popup-overlay'></div>");c.addClass(a.fn.wpbookletImagePopup.useOptions.overlayClass);var d=a("<div class='wpbooklet-image-popup-content'></div>"),e=a("<div class='wpbooklet-image-popup-close'>x</div>"),f=a("<p>Not a valid image file</p>"),g=b.attr("href");return a.fn.wpbookletImagePopup.isImage(g)&&(f=a("<img/>").attr({src:b.attr("href"),alt:b.attr("title")})),d.append(f),d.append(e),c.append(d),c.add(e).on("click",function(){a.fn.wpbookletImagePopup.closePopup(c,b)}),c.find(".wpbooklet-image-popup-content").on("click",function(a){a.stopPropagation()}),c},a.fn.wpbookletImagePopup.openPopup=function(b,c){"function"==typeof a.fn.wpbookletImagePopup.useOptions.beforeOpen&&a.fn.wpbookletImagePopup.useOptions.beforeOpen.call(this,b,c),a("body").append(b),a("html").addClass("wpbooklet-image-popup-active"),"function"==typeof a.fn.wpbookletImagePopup.useOptions.afterOpen&&a.fn.wpbookletImagePopup.useOptions.afterOpen.call(this,b,c)},a.fn.wpbookletImagePopup.closePopup=function(b,c){"function"==typeof a.fn.wpbookletImagePopup.useOptions.beforeClose&&a.fn.wpbookletImagePopup.useOptions.beforeClose.call(this,b,c),b.detach(),a("html").removeClass("wpbooklet-image-popup-active"),"function"==typeof a.fn.wpbookletImagePopup.useOptions.afterClose&&a.fn.wpbookletImagePopup.useOptions.afterClose.call(this,b,c)},a.fn.wpbookletImagePopup.isImage=function(a){if("string"!=typeof a)return!1;var b=a.match(/.*(\.jpg|\.png|\.gif|\.jpeg)$/g);return b?!0:!1},a.fn.wpbookletImagePopup.defaultOptions={overlayClass:"",beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null},a.fn.wpbookletImagePopup.useOptions={}}(jQuery);